# 2005-02-05  CDC
# For Cygwin-Mingw builds only	 

# Remove the -DCDC from the following line to compile FreshFish's orignal code
#CPPFLAGS=-Wno-multichar -mno-cygwin -mwindows -mconsole -O2 -Os -DCDC
CPPFLAGS=-Wno-multichar -mno-cygwin -mwindows -mconsole -O3 -DCDC

MWSE.exe: LOG.o DEBUGGER.o STRING.o FILECACHE.o BUFSPACE.o PROCESSMEM.o \
  REFERENCE.o FUNCEXTENDER.o VIRTUALMACHINE.o TES3MACHINE.o TES3SCRIPTEXTENDER.o \
  INSTCALL.o INSTCOPY.o INSTJUMP.o INSTPOP.o INSTPUSH.o INSTINT.o INSTFLOAT.o \
  FUNCVARIABLES.o FUNCLOG.o FUNCREFERENCE.o FUNCAI.o FUNCPOSITION.o FUNCFILE.o \
  FUNCINVENTORY.o FUNCPROPERTIES.o FUNCTEXT.o TES3OFFSETS.o main.o MWScriptExtender_private.o
	$(CXX) $(CPPFLAGS) -o MWSE.exe *.o
	strip MWSE.exe

clean: 
	rm *.o

LOG.o: LOG.cpp LOG.h DEBUGGING.h

BUFSPACE.o: BUFSPACE.cpp BUFSPACE.h ADDRESSSPACE.h VMTYPES.h

DEBUGGER.o: DEBUGGER.cpp DEBUGGER.h APPLICATION.h

FILECACHE.o: FILECACHE.cpp FILECACHE.h

FUNCAI.o: FUNCAI.cpp FUNCAI.h FUNCEXTENDER.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCTION.h TES3MEMMAP.h \
  VERSION.h TES3OPCODES.h REFERENCE.h DEBUGGING.h

FUNCEXTENDER.o: FUNCEXTENDER.cpp FUNCEXTENDER.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCTION.h TES3MEMMAP.h \
  VERSION.h

FUNCFILE.o: FUNCFILE.cpp FUNCFILE.h TES3MACHINE.h VIRTUALMACHINE.h \
  VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h \
  STRINGS.h FUNCTION.h BREAKPOINT.h FUNCTION.h FILECACHE.h DEBUGGING.h

FUNCINVENTORY.o: FUNCINVENTORY.cpp FUNCINVENTORY.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCEXTENDER.h FUNCTION.h \
  TES3MEMMAP.h VERSION.h TES3OPCODES.h DEBUGGING.h REFERENCE.h LOG.h

FUNCLOG.o: FUNCLOG.cpp FUNCLOG.h TES3MACHINE.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h STRINGS.h \
  FUNCTION.h BREAKPOINT.h LOG.h DEBUGGING.h

FUNCPOSITION.o: FUNCPOSITION.cpp FUNCPOSITION.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCEXTENDER.h FUNCTION.h \
  TES3MEMMAP.h VERSION.h TES3OPCODES.h LOG.h DEBUGGING.h

FUNCREFERENCE.o: FUNCREFERENCE.cpp FUNCREFERENCE.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCEXTENDER.h FUNCTION.h \
  TES3MEMMAP.h VERSION.h TES3OPCODES.h DEBUGGING.h LOG.h

FUNCPROPERTIES.o: FUNCPROPERTIES.cpp FUNCPROPERTIES.h TES3OFFSETS.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCEXTENDER.h FUNCTION.h \
  TES3MEMMAP.h VERSION.h TES3OPCODES.h DEBUGGING.h LOG.h

FUNCTEXT.o: FUNCTEXT.cpp FUNCTEXT.h TES3OFFSETS.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCEXTENDER.h FUNCTION.h \
  TES3MEMMAP.h VERSION.h TES3OPCODES.h DEBUGGING.h LOG.h

FUNCREFLECT.o: FUNCREFLECT.cpp FUNCREFLECT.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCTION.h DEBUGGING.h \
  TES3OPCODES.h INSTCALL.h INSTCOPY.h INSTFLOAT.h INSTINT.h INSTJUMP.h \
  INSTNOP.h INSTPOP.h INSTPUSH.h FUNCVARIABLES.h FUNCAI.h FUNCEXTENDER.h \
  FUNCPOSITION.h FUNCREFERENCE.h FUNCPROPERTIES.h FUNCTEXT.h FUNCLOG.h \
  FUNCFILE.h FILECACHE.h FUNCINVENTORY.h TES3MEMMAP.h VERSION.h

FUNCVARIABLES.o: FUNCVARIABLES.cpp FUNCVARIABLES.h TES3MACHINE.h \
  VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h \
  TES3TYPES.h STRINGS.h FUNCTION.h BREAKPOINT.h FUNCTION.h TES3MEMMAP.h \
  VERSION.h TES3OPCODES.h DEBUGGING.h

INSTCALL.o: INSTCALL.cpp INSTCALL.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h DEBUGGING.h

INSTCOPY.o: INSTCOPY.cpp INSTCOPY.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h DEBUGGING.h

INSTFLOAT.o: INSTFLOAT.cpp INSTFLOAT.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h DEBUGGING.h

INSTINT.o: INSTINT.cpp INSTINT.h VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h \
  ADDRESSSPACE.h MEMACCESSOR.h DEBUGGING.h

INSTJUMP.o: INSTJUMP.cpp INSTJUMP.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h DEBUGGING.h

INSTPOP.o: INSTPOP.cpp INSTPOP.h VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h \
  ADDRESSSPACE.h MEMACCESSOR.h DEBUGGING.h

INSTPUSH.o: INSTPUSH.cpp INSTPUSH.h TES3MACHINE.h VIRTUALMACHINE.h \
  VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h \
  STRINGS.h FUNCTION.h BREAKPOINT.h DEBUGGING.h

PROCESSMEM.o: PROCESSMEM.cpp PROCESSMEM.h ADDRESSSPACE.h VMTYPES.h

REFERENCE.o: REFERENCE.cpp REFERENCE.h TES3MACHINE.h VIRTUALMACHINE.h \
  VMTYPES.h INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h \
  STRINGS.h FUNCTION.h BREAKPOINT.h DEBUGGING.h

STRING.o: STRING.cpp STRINGS.h FUNCTION.h INSTRUCTION.h VMTYPES.h \
  TES3MACHINE.h VIRTUALMACHINE.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h \
  BREAKPOINT.h DEBUGGING.h

TES3MACHINE.o: TES3MACHINE.cpp TES3MACHINE.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h STRINGS.h \
  FUNCTION.h BREAKPOINT.h TES3MEMMAP.h VERSION.h BUFSPACE.h PROCESSMEM.h \
  DEBUGGING.h LOG.h TES3OPCODES.h INSTCALL.h INSTCOPY.h INSTFLOAT.h \
  INSTINT.h INSTJUMP.h INSTNOP.h INSTPOP.h INSTPUSH.h FUNCVARIABLES.h \
  FUNCTION.h FUNCAI.h FUNCEXTENDER.h FUNCPOSITION.h FUNCREFERENCE.h \
  FUNCPROPERTIES.h FUNCTEXT.h FUNCLOG.h FUNCFILE.h FILECACHE.h FUNCINVENTORY.h

TES3SCRIPTEXTENDER.o: TES3SCRIPTEXTENDER.cpp TES3SCRIPTEXTENDER.h \
  DEBUGGER.h APPLICATION.h TES3MACHINE.h VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h STRINGS.h \
  FUNCTION.h BREAKPOINT.h LOG.h TES3MEMMAP.h VERSION.h DEBUGGING.h

VIRTUALMACHINE.o: VIRTUALMACHINE.cpp VIRTUALMACHINE.h VMTYPES.h \
  INSTRUCTION.h ADDRESSSPACE.h MEMACCESSOR.h MEMACCESSORS.h

TES3OFFSETS.o: TES3OFFSETS.cpp TES3OFFSETS.h TES3MACHINE.h FUNCEXTENDER.h STRINGS.h

main.o: main.cpp TES3MACHINE.h VIRTUALMACHINE.h VMTYPES.h INSTRUCTION.h \
  ADDRESSSPACE.h MEMACCESSOR.h TES3TYPES.h STRINGS.h FUNCTION.h \
  BREAKPOINT.h TES3SCRIPTEXTENDER.h DEBUGGER.h APPLICATION.h LOG.h \
  DEBUGGING.h

MWScriptExtender_private.o: MWScriptExtender_private.rc
	windres MWScriptExtender_private.rc MWScriptExtender_private.o
